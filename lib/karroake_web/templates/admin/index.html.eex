<div class="horisontal-row">

    <h1>Nuvarande spellista</h1>

    <%= link "Nollställ", to: Routes.admin_path(@conn, :delete, request: "all"), data: [confirm: "Vill du verkligen ta bort alla förfrågningar?"], class: "button-link row-right warning", method: :delete %>

</div>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Låt</th>
      <th>Artist</th>
      <th>Sångare</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
<%= for queue <- @queued do %>
    <tr>
      <td><%= queue.request.song.id %></td>
      <td><%= queue.request.song.song %></td>
      <td><%= queue.request.song.artist %></td>
      <td><%= all_singers(queue.request, ", ") %></td>
      <td><%= if !queue.played do %>
        <%= button "Spelad", to: Routes.admin_path(@conn, :played, [setsong: queue]), method: :post %>
        <% end %>
      </td>
    </tr>
<% end %>
  </tbody>
</table>

<h1>Förfrågningar</h1>

<table>
  <thead>
    <tr>
      <th>Låt</th>
      <th>Artist</th>
      <th>Sångare</th>
      <th>Tidpunkt</th>
      <td></td>
      <td></td>
    </tr>
<%= for request <- @requested do %>
    <tr>
      <td><%= request.song.song %></td>
      <td><%= request.song.artist %></td>
      <td><%= all_singers(request, ", ") %></td>
      <td><%= request.inserted_at |> get_time %></td>
      <td>
        <%= button "Lägg till", to: Routes.admin_path(@conn, :create, [request: request]) %>
      </td>
      <td>
        <%= button "X", to: Routes.admin_path(@conn, :delete, [request: request]), class: "warning thin", data: [confirm: "Är du säker på att du vill ta bort förfrågningen?"], method: :delete %>
      </td>
    </tr>
<% end %>
  </tbody>
</table>